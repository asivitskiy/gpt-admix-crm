# ADMIX CRM — архитектура проекта (упрощённая модульная)

Этот проект намеренно сделан в стиле **упрощённого MVC** (по сути: модульная структура + общий layout),
без фреймворков и без “полного MVC” (контроллеры/сервис-слои/DI и т.п.). Это сделано специально, чтобы
не возникало путаницы и дублирования архитектуры.

## Маршрутизация
- Точка входа: `public/index.php`
- Роутинг: по GET параметру `m` → `modules/<m>/page.php`
- Пример: `index.php?m=admin`

## Рендеринг
- Общий макет: `views/layout.php`
- Модуль формирует переменные (`$title`, `$subtitle`, `$content`, опционально `$topRightHtml`) и затем layout их отрисовывает.

## Виджеты (переиспользуемые модалки/части UI)
- HTML: `views/partials/widgets/*`
- JS/CSS: `public/assets/widgets/*`
- Виджеты вызываются из любого модуля, например: `window.GPT_Contragents.open({...})`

## API
- Простые JSON-endpoints: `public/api/*.php`
- Каждый endpoint самодостаточен, использует `inc/bootstrap.php` и общую авторизацию/сессию проекта.

## Важно: что НЕ делаем
Чтобы не было “двух параллельных архитектур”, **запрещено** добавлять/развивать структуру “полного MVC”:
- ❌ `app/Controllers`, `app/Modules`, `Services`, `Repositories`, DI-контейнеры и т.п.
- ❌ отдельные роутеры, кроме `public/index.php`
- ❌ второй параллельный способ рендера страниц

Если нужен новый экран → `modules/<name>/page.php`  
Если нужна модалка/вставка для разных экранов → виджет в `views/partials/widgets/*` + `public/assets/widgets/*`  
Если нужна “ручка” → `public/api/<name>.php`
